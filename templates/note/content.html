<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<meta name="author" content="作者">
	<title>{{.Title}}</title>
	<meta name="viewport" content="width=device-width,user-scalable=no">
	<meta name="referrer" content="always">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link href='/css/base.css' rel="stylesheet" type="text/css">
	<script src='/js/prism.js' integrity='sha512-5er36vWGG4t85HPfFUyF/rB9ydf3iZs6XTfV0zJlYm78tu//TYFL7zCZkRqGlaHPMEVtpLE8ifTSTZKJcci+DA=='  async></script>
	<link href='/css/prism.css' integrity='sha512-WJPDzOqZaUM5PdyNroFk4uZQYDrP78l1uY5s9WzOj2WFC5Ic6/czl3QNVoNxndedifOAFM8jDnCC//kH0sLH6g==' rel="stylesheet">
</head>
<body>
	{{template "header"}}
	<div class="container repository-content">
		<div class="note">
			<div class="note-header">
				<div class="note-title"><h1{{if ge .Level 30}} ondblclick="edit()"{{end}}>{{.Title}}</h1></div>
				<div class="note-actions">
				</div>
				<div class="note-info">
					<span>作者:</span>
					<span>时间:{{.Edittime}}</span>
				</div>
			</div>
			<div id="editor" class="note-content">
{{.Content}}
			</div>
		</div>
	</div>
	{{template "footer"}}
	{{if ge .Level 30}}
	<script type="text/javascript">
		"use strict";
		var editor;
		function edit() {
			editor = new window.Editor('#editor')
			editor.customConfig.uploadImgShowBase64 = true
			editor.create()
		}
		function commit(){
			fetch({{.Uri}},{ method: 'PUT',credentials: 'include', body: editor.txt.html()}).then(function(response) {
				if (!response.ok) throw new Error(response.statusText)
				return response.json()
			}).then(function(data){
				console.log(data)
			}).catch(function(err) {
				console.log(err)
			})
		}
	</script>
	<script src="/js/editor.js"></script>
	{{end}}
</body>
</html>
